use System, Date, String, Collection, Mongo, Assert, Properties, File, Stream, Concurrency;

//-------------------------------------------------------------------------
//						  SETUP
//-------------------------------------------------------------------------

var concurrencyRoot = "project/concurrency";
var pluginRoot = "plugins/pipe/source";

//-------------------------------------------------------------------------
//						  EXPORT
//-------------------------------------------------------------------------

// Start concurrent category extraction
extract();

//-------------------------------------------------------------------------
//						  FUNCTIONS
//-------------------------------------------------------------------------

function extract() {
    
    Concurrency.run([
        // Provider
        {
            "robot": pluginRoot :: "/Extract.xill",
            "config": {
                "path": Properties.get("project.pipe.output")
            },
            "threadCount": 1,
        },
        {
            "robot": concurrencyRoot :: "/StoreDocument.xill",
            "config": {}
        },
        {
            "robot": concurrencyRoot :: "/PrintProcessed.xill",
            "config": {},
            "threadCount": 1,
        }
    ]);
}